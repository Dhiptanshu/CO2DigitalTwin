<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>India COâ‚‚ Dashboard</title>

<link href="https://cdn.jsdelivr.net/npm/cesium@1.125/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0B1120">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

<!-- External stylesheet -->
<link rel="stylesheet" href="styles.css">

<!-- Libraries -->
<script src="https://cdn.jsdelivr.net/npm/cesium@1.125/Build/Cesium/Cesium.js"></script>
<script src="https://cdn.plot.ly/plotly-2.26.2.min.js"></script>
</head>

<body>

<header>
  <div class="title-block">
    <h1><span class="dot"></span> India COâ‚‚ Monitoring &amp; Planning Tool</h1>
    <small>Interactive national view for COâ‚‚ planning and interventions</small>
  </div>
  <span class="tag">Live Scenario Sandbox</span>
</header>

<div id="main">
  <div id="controls">
    <h3>Intervention Settings</h3>
    <p class="sub">Configure city, station & efficiency to simulate impact.</p>

    <div class="chip-row">
      <span class="chip">Real-time Map</span>
      <span class="chip">Urban Planning</span>
    </div>

    <label for="citySearch">Select City</label>
    <div class="city-search-wrapper">
      <input
        type="text"
        id="citySearch"
        placeholder="Type to search city..."
        autocomplete="off"
      />
      <!-- LIVE SUGGESTIONS DROPDOWN -->
      <div id="citySearchSuggestions" class="city-search-suggestions"></div>
    </div>
    <div class="chip-row" id="cityRecommendations" style="display:none; margin-top:4px;">
      <!-- Chips will be injected by JS -->
    </div>
    <select id="citySelect"></select>

    <label for="stationSelect">Choose Station</label>
    <select id="stationSelect"></select>

    <label for="methodSelect">Select Intervention</label>
    <select id="methodSelect">
      <option>Roadside Capture Unit</option>
      <option>Vertical Garden</option>
      <option>Biofilter</option>
    </select>

    <label for="displayMode">Display</label>
    <div class="segmented" id="displayMode">
      <label><input type="radio" name="display" value="baseline" checked> Baseline</label>
      <label><input type="radio" name="display" value="live"> Live</label>
      <label><input type="radio" name="display" value="both"> Both</label>
    </div>

    <label for="reductionInput">Efficiency (%)</label>
    <input type="number" id="reductionInput" value="20" min="0" max="50">

    <button id="applyBtn">Apply Intervention</button>

    <button id="startReportBtn">Start Reporting</button>

    <label for="reportScope">Report Scope</label>
    <select id="reportScope">
      <option value="city">Current city only</option>
      <option value="session">All cities this session</option>
    </select>

    <button id="downloadReportBtn" disabled>Download Report</button>

    <label for="colorMode">Color coding</label>
    <select id="colorMode">
      <option value="co2" selected>COâ‚‚ intensity</option>
      <option value="sector">Dominant sector</option>
    </select>

  </div>

  <div id="dashboard">
    <div class="card">
      <div class="card-header">
        <div class="card-header-title">3D National Context</div>
        <div class="card-header-meta">Cesium terrain Â· COâ‚‚ hotspots</div>
      </div>

      <div id="cesiumContainer"></div>

      <!-- Legend -->
      <div class="legend">
        <div class="legend-item"><span class="legend-color legend-low"></span> â‰¤420 ppm</div>
        <div class="legend-item"><span class="legend-color legend-mid"></span> 421â€“450 ppm</div>
        <div class="legend-item"><span class="legend-color legend-high"></span> >450 ppm</div>
        <div class="legend-item"><span class="legend-color legend-na"></span> No data</div>
      </div>
    </div>

    <!-- DECISION-SUPPORT SUMMARY CARD -->
    <div class="card" id="summaryCard">
      <div class="card-inner-header">
        <div class="card-inner-title">Decision Support Overview</div>
        <span class="pill">City Snapshot</span>
      </div>
      <div class="kpi-grid">
        <div class="kpi-card">
          <div class="kpi-label">Selected City</div>
          <div class="kpi-value" id="kpiCity">â€“</div>
          <div class="kpi-sub" id="kpiStations">0 monitoring stations</div>
        </div>

        <div class="kpi-card">
          <div class="kpi-label">Average COâ‚‚</div>
          <div class="kpi-value" id="kpiAvg">â€“</div>
          <div class="kpi-sub">Across active stations</div>
        </div>

        <div class="kpi-card">
          <div class="kpi-label">Worst Hotspot</div>
          <div class="kpi-value" id="kpiMax">â€“</div>
          <div class="kpi-sub" id="kpiMaxStation">â€“</div>
        </div>

        <div class="kpi-card">
          <div class="kpi-label">COâ‚‚ Reduction</div>
          <div class="kpi-value" id="kpiReduction">0 ppm</div>
          <div class="kpi-sub">Total drop vs. baseline today</div>
        </div>
      </div>
    </div>

    <!-- ðŸ†• WEATHER & SEASONAL IMPACT CARD -->
    <div class="card" id="weatherCard">
      <div class="card-inner-header">
        <div class="card-inner-title">Weather &amp; Seasonal Impact</div>
        <span class="pill">Monthly Pattern</span>
      </div>

      <div class="weather-header-row">
        <div class="weather-select-group">
          <label for="weatherMonth" class="weather-label">Month</label>
          <select id="weatherMonth">
            <option value="auto" selected>Auto (based on city)</option>
            <option value="1">January (winter)</option>
            <option value="2">February</option>
            <option value="3">March</option>
            <option value="4">April</option>
            <option value="5">May (summer peak)</option>
            <option value="6">June</option>
            <option value="7">July</option>
            <option value="8">August</option>
            <option value="9">September</option>
            <option value="10">October</option>
            <option value="11">November (early winter)</option>
            <option value="12">December (winter)</option>
          </select>
        </div>

        <div class="weather-current">
          <div class="weather-main" id="weatherSummary">Select a city</div>
          <div class="weather-sub" id="weatherMeta">
            Winters in north India often show higher COâ‚‚ / pollution due to low wind &amp; mixing height.
          </div>
        </div>
      </div>

      <div class="weather-metrics-row">
        <div class="weather-metric">
          <div class="weather-metric-label">Avg Temperature</div>
          <div class="weather-metric-value" id="weatherTemp">â€“</div>
          <div class="weather-metric-sub">Â°C</div>
        </div>
        <div class="weather-metric">
          <div class="weather-metric-label">Wind Speed</div>
          <div class="weather-metric-value" id="weatherWind">â€“</div>
          <div class="weather-metric-sub">m/s</div>
        </div>
        <div class="weather-metric">
          <div class="weather-metric-label">Mixing Height</div>
          <div class="weather-metric-value" id="weatherMixing">â€“</div>
          <div class="weather-metric-sub">m</div>
        </div>
        <div class="weather-metric">
          <div class="weather-metric-label">Stagnation Risk</div>
          <div class="weather-metric-badge" id="weatherStagnation">â€“</div>
        </div>
      </div>

      <div id="monthlyChart" class="weather-monthly-chart"></div>
    </div>

    <!-- Table + CO2 chart + Sector pie chart -->
    <div id="charts" class="card-column">
      <div class="card">
        <div class="card-inner-header">
          <div class="card-inner-title">Station Snapshot</div>
          <span class="pill">Tabular View</span>
        </div>
        <div id="table"></div>
      </div>

      <div class="card">
        <div class="card-inner-header">
          <div class="card-inner-title">COâ‚‚ Levels</div>
          <span class="pill">Baseline vs Live</span>
        </div>
        <div id="barChart" style="height:360px;"></div>
      </div>

      <div class="card">
        <div class="card-inner-header">
          <div class="card-inner-title">Sectoral Emission Mix</div>
          <span class="pill">Inference from LULC</span>
        </div>
        <div id="sectorChart" style="height:280px;"></div>
      </div>
    </div>
  </div>
</div>

<!-- Your app logic -->
<script src="script.js"></script>

</body>
</html>
