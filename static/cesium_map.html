<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>India CO₂ Dashboard</title>

<link href="https://cdn.jsdelivr.net/npm/cesium@1.125/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0B1120">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

<!-- External stylesheet -->
<link rel="stylesheet" href="styles.css">

<!-- Libraries -->
<script src="https://cdn.jsdelivr.net/npm/cesium@1.125/Build/Cesium/Cesium.js"></script>
<script src="https://cdn.plot.ly/plotly-2.26.2.min.js"></script>
</head>

<body>

<header>
  <div class="title-block">
    <h1><span class="dot"></span> India CO₂ Monitoring &amp; Planning Tool</h1>
    <small>Interactive national view for CO₂ planning and interventions</small>
  </div>
  <span class="tag">Live Scenario Sandbox</span>
</header>

<div id="main">
  <div id="controls">
    <h3>Intervention Settings</h3>
    <p class="sub">Configure city, station & efficiency to simulate impact.</p>

    <div class="chip-row">
      <span class="chip">Real-time Map</span>
      <span class="chip">Urban Planning</span>
    </div>

    <label for="citySearch">Select City</label>
    <div class="city-search-wrapper">
      <input
        type="text"
        id="citySearch"
        placeholder="Type to search city..."
        autocomplete="off"
      />
      <!-- LIVE SUGGESTIONS DROPDOWN -->
      <div id="citySearchSuggestions" class="city-search-suggestions"></div>
    </div>
    <div class="chip-row" id="cityRecommendations" style="display:none; margin-top:4px;">
      <!-- Chips will be injected by JS -->
    </div>
    <select id="citySelect"></select>

    <label for="stationSelect">Choose Station</label>
    <select id="stationSelect"></select>

    <label for="methodSelect">Select Intervention</label>
    <select id="methodSelect">
      <option>Roadside Capture Unit</option>
      <option>Vertical Garden</option>
      <option>Biofilter</option>
    </select>

    <label for="displayMode">Display</label>
    <div class="segmented" id="displayMode">
      <label><input type="radio" name="display" value="baseline" checked> Baseline</label>
      <label><input type="radio" name="display" value="live"> Live</label>
      <label><input type="radio" name="display" value="both"> Both</label>
    </div>

    <label for="reductionInput">Efficiency (%)</label>
    <input type="number" id="reductionInput" value="20" min="0" max="50">

    <button id="applyBtn">Apply Intervention</button>

    <button id="startReportBtn">Start Reporting</button>

    <label for="reportScope">Report Scope</label>
    <select id="reportScope">
      <option value="city">Current city only</option>
      <option value="session">All cities this session</option>
    </select>

    <button id="downloadReportBtn" disabled>Download Report</button>

    <label for="colorMode">Color coding</label>
    <select id="colorMode">
      <option value="co2" selected>CO₂ intensity</option>
      <option value="sector">Dominant sector</option>
    </select>

  </div>

  <div id="dashboard">
    <div class="card">
      <div class="card-header">
        <div class="card-header-title">3D National Context</div>
        <div class="card-header-meta">Cesium terrain · CO₂ hotspots</div>
      </div>

      <div id="cesiumContainer"></div>

      <!-- Legend -->
      <div class="legend">
        <div class="legend-item"><span class="legend-color legend-low"></span> ≤420 ppm</div>
        <div class="legend-item"><span class="legend-color legend-mid"></span> 421–450 ppm</div>
        <div class="legend-item"><span class="legend-color legend-high"></span> >450 ppm</div>
        <div class="legend-item"><span class="legend-color legend-na"></span> No data</div>
      </div>
    </div>

    <!-- DECISION-SUPPORT SUMMARY CARD -->
    <div class="card" id="summaryCard">
      <div class="card-inner-header">
        <div class="card-inner-title">Decision Support Overview</div>
        <span class="pill">City Snapshot</span>
      </div>
      <div class="kpi-grid">
        <div class="kpi-card">
          <div class="kpi-label">Selected City</div>
          <div class="kpi-value" id="kpiCity">–</div>
          <div class="kpi-sub" id="kpiStations">0 monitoring stations</div>
        </div>

        <div class="kpi-card">
          <div class="kpi-label">Average CO₂</div>
          <div class="kpi-value" id="kpiAvg">–</div>
          <div class="kpi-sub">Across active stations</div>
        </div>

        <div class="kpi-card">
          <div class="kpi-label">Worst Hotspot</div>
          <div class="kpi-value" id="kpiMax">–</div>
          <div class="kpi-sub" id="kpiMaxStation">–</div>
        </div>

        <div class="kpi-card">
          <div class="kpi-label">CO₂ Reduction</div>
          <div class="kpi-value" id="kpiReduction">0 ppm</div>
          <div class="kpi-sub">Total drop vs. baseline today</div>
        </div>
      </div>
    </div>

    <!-- Table + CO2 chart + Sector pie chart -->
    <div id="charts" class="card-column">
      <div class="card">
        <div class="card-inner-header">
          <div class="card-inner-title">Station Snapshot</div>
          <span class="pill">Tabular View</span>
        </div>
        <div id="table"></div>
      </div>

      <div class="card">
        <div class="card-inner-header">
          <div class="card-inner-title">CO₂ Levels</div>
          <span class="pill">Baseline vs Live</span>
        </div>
        <div id="barChart" style="height:360px;"></div>
      </div>

      <div class="card">
        <div class="card-inner-header">
          <div class="card-inner-title">Sectoral Emission Mix</div>
          <span class="pill">Inference from LULC</span>
        </div>
        <div id="sectorChart" style="height:280px;"></div>
      </div>
    </div>
  </div>
</div>

<!-- Your app logic -->
<script src="script.js"></script>

</body>
</html>
